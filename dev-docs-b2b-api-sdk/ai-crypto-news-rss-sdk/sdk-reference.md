# SDK Reference

## SDK Reference

This section provides a detailed reference for the AI News SDK, including available methods, parameters, and data formats. The SDK is currently focused on a single primary method for news retrieval, as well as configuration and error handling utilities.

***

### AINews SDK Initialization

**`new AINews(options)`** – Creates a new client instance for the AI News SDK.

* **`apiKey`** (string, required): Your ChainGPT API key. This is obtained from the ChainGPT AI Hub dashboard. The key is used to authenticate your requests to the AI News API.
*   _Example:_

    ```
    import { AINews } from '@chaingpt/ainews';
    const ainews = new AINews({ apiKey: process.env.CHAINGPT_API_KEY });
    ```

Once initialized, you use the `ainews` instance to call the news-fetching methods described below.

### `ainews.getNews(parameters)`

Fetches AI-generated news articles, optionally filtered by various criteria. This method returns a **Promise** that resolves to a response object containing the news data.

**Parameters:** (All fields are optional, unless otherwise noted. If no filters are provided, it returns the latest general news.)

* **`categoryId`**: _number or number\[]_ – One or multiple Category IDs to filter by. Categories represent broad topics (e.g. DeFi, NFTs, Metaverse). See **Category ID Table** below for the list of category IDs. You can provide a single ID or an array of IDs. If provided, the results will include only news items whose category matches one of these IDs.
* **`subCategoryId`**: _number or number\[]_ – One or multiple Sub-Category IDs to filter by. Sub-categories typically correspond to blockchain ecosystems or platforms (e.g. Bitcoin, Ethereum, Solana). Use this to get news related to specific blockchains. See the **Sub-Category (Blockchain) ID Table** below. As with categoryId, you can pass one ID or an array.
* **`tokenId`**: _number or number\[]_ – One or multiple Token IDs to filter by. This filters news by specific cryptocurrency or token. For example, there are token IDs for BTC, ETH, BNB, etc. (See **Token ID Table**.) Use this to focus on news primarily about a particular coin/token.
* **`searchQuery`**: _string_ – A search keyword or phrase. When provided, the API will search within the title and description of news articles for matches. This is a full-text search that can be used to find news on a particular topic (e.g. “exchange hack” or “NFT marketplace”).
* **`fetchAfter`**: _Date or string (ISO 8601 date)_ – If set, only news items published **after** this date/time will be returned. This is useful for getting historical data or incrementally fetching new articles since the last check. For example, `fetchAfter: new Date("2025-01-01")` will fetch news from 2025 onward. (If not provided, the API will return recent news by default.)
* **`limit`**: _number_ – The maximum number of news items to return. If not specified, a default limit (e.g. 10) is used by the API. You can use this to control page size when paginating.
* **`offset`**: _number_ – The number of items to skip from the start. Use `offset` in combination with `limit` for pagination. For instance, to get the second page of results with page size 10, use `limit: 10` and `offset: 10`.
* **`sortBy`**: _string_ – Field to sort the results by. The default (and currently primary) sort is by date/time. For example, `sortBy: 'createdAt'` will sort by the article’s creation timestamp (most likely descending, i.e. newest first). If not specified, the news is sorted by newest first by default. Currently, other sort fields may not be commonly used, as real-time news is typically just sorted by recency.

**Response:** On success, the Promise resolves to an object typically structured as:

```
{
  "status": true,
  "message": "News fetched successfully.",
  "data": {
    "rows": [
       {
         "id": 12345,
         "title": "Headline text",
         "description": "Summary of the news article...",
         "source": "CoinDesk",
         "sourceUrl": "https://www.coindesk.com/....", 
         "category": "DeFi",
         "categoryId": 5,
         "subCategory": "Ethereum",
         "subCategoryId": 15,
         "token": "Ethereum",
         "tokenId": 80,
         "createdAt": "2025-04-14T18:00:00.000Z",
         "updatedAt": "2025-04-14T18:00:00.000Z"
       },
       { /* ... more items ... */ }
    ],
    "count": 10,
    "offset": 0,
    "limit": 10
  }
}
```

* `data.rows` is an array of news items. Each item contains fields like:
  * **id**: Internal ID of the news entry.
  * **title**: The headline of the news article (AI-generated or taken from source).
  * **description**: The condensed summary of the article content (generated by the AI).
  * **source**: The source of the news (e.g., name of the original website or "ChainGPT AI" if aggregated).
  * **sourceUrl**: A link to the original source article (if available). This can be used if you want to redirect users to full story on the source site.
  * **category/categoryId**: The category name and ID the article was classified under (e.g. "DeFi" and 5).
  * **subCategory/subCategoryId**: The sub-category (blockchain ecosystem) and its ID (e.g. "Ethereum" and 15).
  * **token/tokenId**: If the article is primarily about a specific token/project, this field gives its name and ID (e.g. "Ethereum" and 80). Not all articles have a specific token focus, in which case this might be null.
  * **createdAt**: Timestamp when the AI published the news article (ISO date string).
  * **updatedAt**: Timestamp of last update (usually same as createdAt unless the article was updated).
* `count`: The number of items returned in this response.
* `offset`: The offset that was applied (useful to verify pagination).
* `limit`: The limit that was applied.

**Example usage:**

```
// 1. Get latest general news (no filters)
const res1 = await ainews.getNews({});
// 2. Get 5 latest Bitcoin-related news (by token)
const res2 = await ainews.getNews({ tokenId: [79], limit: 5 });
// 3. Search news for "NFT marketplace"
const res3 = await ainews.getNews({ searchQuery: "NFT marketplace", limit: 5 });
// 4. Get news in Gaming category related to Polygon blockchain
const res4 = await ainews.getNews({ categoryId: [2], subCategoryId: [20] });
```

In example 4 above, `categoryId: 2` corresponds to "Blockchain Gaming" category, and `subCategoryId: 20` is "Polygon". This would return news articles that are tagged as blockchain gaming and related to the Polygon ecosystem (for instance, news about a game built on Polygon).

**Error Handling:** If the request fails (due to network issues, invalid parameters, or an authentication error), the `getNews()` Promise will reject with an error. Specifically, the SDK will throw an error of type `Errors.AINewsError` for API-related issues. You should catch these errors and inspect `error.message` for details. (See **Error Handling** below.)

***

### Category ID Reference

Below is the list of **Category** identifiers available for filtering. Categories represent high-level topics or sectors within crypto/Web3.

| **Category**                        | **ID** |
| ----------------------------------- | ------ |
| Blockchain Gaming                   | 2      |
| DAO (Decentralized Autonomous Orgs) | 3      |
| DApps (Decentralized Apps)          | 4      |
| DeFi (Decentralized Finance)        | 5      |
| Lending                             | 6      |
| Metaverse                           | 7      |
| NFT (Non-Fungible Tokens)           | 8      |
| Stablecoins                         | 9      |
| Cryptocurrency (General)            | 64     |
| Decentralized (General)             | 65     |
| Smart Contracts                     | 66     |
| Distributed Ledger                  | 67     |
| Cryptography                        | 68     |
| Digital Assets                      | 69     |
| Tokenization                        | 70     |
| Consensus Mechanisms                | 71     |
| ICO (Initial Coin Offering)         | 72     |
| Crypto Wallets                      | 73     |
| Web3.0                              | 74     |
| Interoperability                    | 75     |
| Mining                              | 76     |
| Cross-Chain Transactions            | 77     |
| Exchange                            | 78     |

_(ID 1 is reserved or not used in this context. Categories 2–9 cover specific segments, and 64+ cover broader conceptual topics.)_ Use these IDs in the `categoryId` filter to get news belonging to those categories. For example, to filter for NFT news, use `categoryId: [8]`.

***

### Sub-Category (Blockchain) ID Reference

Sub-categories usually denote blockchain platforms or ecosystems. Use these IDs in the `subCategoryId` filter to get news related to a specific blockchain or protocol ecosystem:

<table><thead><tr><th width="245.33203125">Sub-Category (Blockchain)</th><th width="95.546875">Chain ID</th></tr></thead><tbody><tr><td>Bitcoin</td><td>11</td></tr><tr><td>BNB Chain</td><td>12</td></tr><tr><td>Celo</td><td>13</td></tr><tr><td>Cosmos</td><td>14</td></tr><tr><td>Ethereum</td><td>15</td></tr><tr><td>Fantom</td><td>16</td></tr><tr><td>Flow</td><td>17</td></tr><tr><td>Litecoin</td><td>18</td></tr><tr><td>Monero</td><td>19</td></tr><tr><td>Polygon</td><td>20</td></tr><tr><td>XRP Ledger</td><td>21</td></tr><tr><td>Solana</td><td>22</td></tr><tr><td>TRON</td><td>23</td></tr><tr><td>Terra</td><td>24</td></tr><tr><td>Tezos</td><td>25</td></tr><tr><td>WAX</td><td>26</td></tr><tr><td>Algorand</td><td>27</td></tr><tr><td>Arbitrum</td><td>28</td></tr><tr><td>Astar</td><td>29</td></tr><tr><td>Aurora</td><td>30</td></tr><tr><td>Avalanche</td><td>31</td></tr><tr><td>Base</td><td>32</td></tr><tr><td>Binance Smart Chain</td><td>33</td></tr><tr><td>Cardano</td><td>34</td></tr><tr><td>Cronos</td><td>36</td></tr><tr><td>Moonbeam</td><td>37</td></tr><tr><td>Harmony</td><td>41</td></tr><tr><td>Oasis Network</td><td>42</td></tr><tr><td>Oasis Sapphire (Oasis ParaChain)</td><td>43</td></tr><tr><td>Ontology</td><td>44</td></tr><tr><td>Optimism</td><td>45</td></tr><tr><td>Other (Misc. Blockchains)</td><td>46</td></tr><tr><td>PlatON</td><td>47</td></tr><tr><td>Rangers Protocol</td><td>49</td></tr><tr><td>Ronin</td><td>50</td></tr><tr><td>Shiden Network</td><td>51</td></tr><tr><td>SKALE</td><td>52</td></tr><tr><td>Stacks</td><td>54</td></tr><tr><td>Stargaze</td><td>55</td></tr><tr><td>Steem</td><td>56</td></tr><tr><td>SX Network</td><td>57</td></tr><tr><td>Telos</td><td>58</td></tr><tr><td>Telos EVM</td><td>59</td></tr><tr><td>Theta Network</td><td>61</td></tr><tr><td>ThunderCore</td><td>62</td></tr></tbody></table>

These cover most major Layer-1 and Layer-2 networks. The **Other (46)** category catches any chain news not explicitly listed. For example, to get only **Ethereum ecosystem** news, use `subCategoryId: [15]`. For **Bitcoin** news, use `subCategoryId: [11]`. If a news article is about multiple chains, it will typically be classified under the primary chain it concerns.

{% hint style="info" %}
_**Note:** Some IDs were skipped in the sequence above due to internal categorization; e.g., there is no ID 35 or 38 in use – they were reserved or merged. “Other” (46) should be used for chains not listed individually._
{% endhint %}

***

### Token ID Reference

The following are **Token** identifiers for filtering by specific cryptocurrency or token project. Use these in the `tokenId` filter to get news specifically about that token (usually price news, major project updates, etc.):

<table><thead><tr><th width="191.6796875">Token (Symbol)</th><th width="103.734375">Chain-ID</th></tr></thead><tbody><tr><td>Bitcoin (BTC)</td><td>79</td></tr><tr><td>Ethereum (ETH)</td><td>80</td></tr><tr><td>Tether USD (USDT)</td><td>81</td></tr><tr><td>BNB (BNB)</td><td>82</td></tr><tr><td>XRP (XRP)</td><td>83</td></tr><tr><td>USD Coin (USDC)</td><td>84</td></tr><tr><td>Solana (SOL)</td><td>85</td></tr><tr><td>Cardano (ADA)</td><td>86</td></tr><tr><td>Dogecoin (DOGE)</td><td>87</td></tr><tr><td>TRON (TRX)</td><td>88</td></tr><tr><td>Toncoin (TON)</td><td>89</td></tr><tr><td>Dai (DAI)</td><td>90</td></tr><tr><td>Polygon (MATIC)</td><td>91</td></tr><tr><td>Polkadot (DOT)</td><td>92</td></tr><tr><td>Litecoin (LTC)</td><td>93</td></tr><tr><td>Wrapped Bitcoin (WBTC)</td><td>94</td></tr><tr><td>Bitcoin Cash (BCH)</td><td>95</td></tr><tr><td>Chainlink (LINK)</td><td>96</td></tr><tr><td>Shiba Inu (SHIB)</td><td>97</td></tr><tr><td>UNUS SED LEO (LEO)</td><td>98</td></tr><tr><td>TrueUSD (TUSD)</td><td>99</td></tr><tr><td>Avalanche (AVAX)</td><td>100</td></tr><tr><td>Stellar (XLM)</td><td>101</td></tr><tr><td>Monero (XMR)</td><td>102</td></tr><tr><td>OKB (OKB)</td><td>103</td></tr><tr><td>Cosmos (ATOM)</td><td>104</td></tr><tr><td>Uniswap (UNI)</td><td>105</td></tr><tr><td>Ethereum Classic (ETC)</td><td>106</td></tr><tr><td>BUSD (BUSD)</td><td>107</td></tr><tr><td>Hedera (HBAR)</td><td>108</td></tr></tbody></table>

For example, `tokenId: [79]` will filter news about **Bitcoin**, and `tokenId: [99]` would filter news about **TrueUSD**. You can combine multiple tokens in the array if you want news that is about either of those tokens.

{% hint style="info" %}
Keep in mind that token-focused news often overlaps with blockchain news (e.g., an Ethereum token update might be categorized under Ethereum subcategory as well). Use token filters for news explicitly about that asset (like price analysis or token-specific announcements).
{% endhint %}

***

### Error Handling and Exceptions

All SDK methods that communicate with the API can throw exceptions if something goes wrong. The common error class for this SDK is `Errors.AINewsError`. Here are some scenarios and how to handle them:

* **Invalid API Key / Unauthorized:** If your API key is missing or incorrect, the request will fail with an authorization error. The SDK will throw an `AINewsError` in this case, with a message indicating an auth issue (e.g. “Invalid API key”).
* **Insufficient Credits:** If you run out of credits in your ChainGPT account, the API will refuse requests. This will also result in an `AINewsError` (the message might say something like “Insufficient credits” in the error).
* **Rate Limit Exceeded:** The API enforces rate limits. Users can make up to **200 requests per minute**. If you exceed this, you may get a rate-limit error (HTTP 429). The SDK would throw an `AINewsError` in this case as well. If this happens, implement backoff/retry logic or slow down your request rate.
* **Network or Server Errors (5xx):** If the ChainGPT API is down or unreachable, or a server error occurs, the SDK will throw an `AINewsError`. The message will contain the HTTP status or a general description (like “Network request failed”).
* **Invalid Parameters:** If you supply an incorrectly formatted parameter (e.g. a string where a number is expected), the API might return a 400 Bad Request. This would also surface as an `AINewsError` from the SDK. Double-check types and allowed values if you see such errors.

**Example of catching errors:**

```
import { Errors } from '@chaingpt/ainews';

try {
  const res = await ainews.getNews({ tokenId: [999] }); // 999 not a valid ID
} catch (err) {
  if (err instanceof Errors.AINewsError) {
    console.error("AINewsError:", err.message);
    // Handle known error (maybe log or alert user)
  } else {
    console.error("Unexpected error:", err);
    // Handle or rethrow
  }
}
```

In the above snippet, we intentionally used an invalid tokenId (999). The API might respond with an error like “Invalid token ID”, which the SDK wraps in an AINewsError. We check the instance and handle it accordingly.

Always wrap your `getNews` calls in try/catch (or `.catch` on the Promise) especially in production, to ensure your application can gracefully handle outages or errors from the news service.

***

### Request Limits and Performance

As mentioned, the API allows up to 200 requests per minute per API key. Exceeding this will trigger rate limiting. If you need to make a high volume of requests (for example, in a busy production environment), consider these best practices:

* **Caching:** Cache the results of news queries on your end. For instance, if your frontend calls your backend for news every minute, but the news only updates every few minutes, you can cache the response for a short time (say 30-60 seconds) to avoid hitting the API too often.
* **Batch Requests:** Rather than making many individual requests for different filters, try to batch filters into one call if possible. For example, instead of two separate calls for category 5 and category 7, you can do one call with `categoryId: [5,7]` to get both.
* **Respect `limit` appropriately:** If you only need the latest item (for a ticker or alert), call with `limit: 1` instead of retrieving a full page.
* **Monitor Usage:** The ChainGPT dashboard likely shows your credit usage. Keep an eye on it to ensure you don’t run out unexpectedly. You might implement a check in your app to warn if credits are low.

{% hint style="info" %}
Each successful request will deduct **1 credit** from your account balance (whether it returns 1 news item or 100). Plan your credit usage according to the frequency of your queries.
{% endhint %}

***

### Language and Environment Compatibility

The official SDK is written for **Node.js (JavaScript/TypeScript)** environments. It can be used in Node 14+ and in server-side contexts. It is not intended to run in browsers directly (as you wouldn’t want to expose your API key client-side, and CORS might also block direct calls to the API). If you are developing in another language or environment, you have a few options:

* Use the **REST API** directly: The ChainGPT AI News SDK is essentially a wrapper around HTTP calls. You can make direct HTTP requests to the API endpoints (e.g., via `fetch` or `axios` in other languages) using your API key in the headers. You’ll need to refer to ChainGPT’s API docs for the exact endpoints and request format. The responses will be in JSON similar to what’s shown above.
* Serverless Functions or Backend as a middleman: Even for mobile apps or web apps in other languages, you can create a small backend (using Node or any language) that uses the SDK or HTTP calls to fetch news and then deliver it to your client in a safe manner.
* Community SDKs: As the product grows, there may be community-contributed libraries in Python, Ruby, etc. (At the time of writing, JavaScript is the primary supported SDK).

{% hint style="info" %}
In summary, any environment that can make HTTPS requests can integrate the AI News service – you’re not limited to Node.js. The Node SDK just makes it easier for JavaScript developers by providing a ready-made package.
{% endhint %}
